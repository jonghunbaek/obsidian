자바 가상 머신 명세에선 바이트 코드 실행 엔진의 개념 모델을 정의해 다양한 JVM들이 통일성을 갖게 만들었다.
이 모델에서 실행 엔진의 실행 방법은 크게 두 가지로 구분할 수 있다.
- **해석 실행**(인터프리터를 통한 실행)
- **컴파일 실행**(JIT 컴파일러로 네이티브 코드 생성 후 실행)

두 가지 중 어떤 방식을 택하는 입력은 바이너리 바이트 스트림이며, 출력 결과는 같다.

# 1. 런타임 스택 프레임 구조
JVM은 메서드 호출과 실행을 뒷받침하는 내부 데이터 구조로 '스택 프레임'을 사용한다.
스택 프레임엔 아래와 같은 정보가 저장된다.
- **지역 변수 테이블**
- **피연산자 스택**
- **동적 링크**
- **메서드 반환 주소**
- **기타 추가 정보**

## 지역 변수 테이블
지역 변수 테이블은 말 그대로 메서드의 매개 변수와 메서드 안에서 정의된 지역 변수를 저장하는 공간이다.
이 공간의 **크기는 컴파일 시 계산되며, 오로지 소스 코드와 VM의 스택 메모리 레이아웃에 좌우**된다.

크기의 단위는 변수 슬롯을 사용하며, 일반적으로 변수 슬롯 하나의 크기는 32비트이다. (대개 32비트의 VM인 경우)
이 경우 저장될 수 있는 데이터 타입은 boolean, byte, char, short, int, float, 참조 타입, returnAddress다.

공식 문서에서 참조 타입의 크기를 명시하진 않았지만 참조는 다음 두 가지의 역할을 해야 한다.
- 참조가 가리키는 **객체의 자바 힙 내에서의 시작 주소 또는 인덱스를 알 수 있어야** 한다.
- 참조가 가리키는 **객체의 타입 정보를 직간접적으로 알 수 있어야** 한다.

64비트 데이터 타입(long, double)의 경우 JVM은 연속된 두 개의 슬롯을 고차 정렬 방식으로 연결해 할당한다.
이 때문에 long과 double 타입의 읽기와 쓰기는 32비트씩 나눠 수행되어 원자적이지 않다라는 말이 나온 것이다. 
지역 변수 테이블에선 스레드별로 할당되기에 상관 없다.

### 지역 변수 테이블의 인덱스
JVM은 지역 변수 테이블을 인덱스 방식으로 이용한다. 범위는 0부터 변수 슬롯 최대 개수까지다. 
보통 0번째 인덱스엔 메서드가 속한 인스턴스의 참조인 this가 저장되고 이후 매개 변수, 지역 변수들이 저장된다. 

### 지역 변수의 유효 범위
바이트 코드 상에서 지역 변수의 유효 범위는 메서드 본문 전체가 아닐 수 있다. 
때문에 변수 슬롯은 재사용될 수 있다. 
하지만 이에 따른 부작용이 몇 가지 존재한다.