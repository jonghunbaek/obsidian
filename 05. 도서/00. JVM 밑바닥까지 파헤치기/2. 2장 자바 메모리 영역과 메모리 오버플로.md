자바 개발자는 JVM에서 제공하는 자동 메모리 관리 메커니즘 덕에 메모리 할당과 해제라는 작업에서 자유로울 수 있다. 하지만 문제가 발생하게 되면 JVM의 메모리 관리 방식을 이해하지 못하는 한 문제 해결이 상당히 어려워진다. 
그렇기 때문에 JVM이 관리하는 다양한 메모리 영역과 각 영역의 역할 등에 대해 알아둬야 한다.
## 2.1 런타임 데이터 영역
![[JVM 구조.png]]
#### 2.2.1 프로그램 카운터
프로그램 카운터 레지스터는 작은 메모리 영역으로, 현재 실행 중인 스레드의 '바이트 코드 줄 번호 표시기'라고 볼 수 있다. 다시 말해 프로그램의 제어 흐름, 분기, 순환, 점프 등을 표현한 것이다. 
JVM의 멀티 스레딩은 CPU 코어를 여러 스레드가 교대로 사용하며, 특정 시각에 각 코어는 한 스레드의 명령어만 실행하게 된다. 그러므로 스레드 전환 후 이전에 실행하다 멈춘 지점을 정확하게 복원하려면 스레드 각각에는 고유한 프로그램 카운터가 필요하다. 이러한 이유 때문에 **프로그램 카운터(PC)레지스터는 각 스레드의 고유한 공간에 저장된다.**
>[!NOTE] 참고
> 스레드가 자바 메서드를 실행할 땐, 바이트 코드 명령어의 주소가 저장되지만 네이티브 메서드를 실행할 땐 Undefined가 프로그램 카운터에 저장된다.
#### 2.2.2 자바 가상 머신 스택
가상 머신 스택도 스레드 프라이빗하며, 연결된 스레드와 생명주기가 같다. 자바에서 각 **메서드가 호출될 때마다 자바 가상 머신은 스택 프레임을 만들어 지역 변수 테이블, 피연산자 스택, 동적 링크, 메서드 반환값 등의 정보를 저장**한다. 이후 스택 프레임을 가상 머신 스택에 push, pop을 반복한다.
